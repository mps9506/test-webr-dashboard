---
title: "test-webr-dashboard"
author: "Penguin Friend"
format:
  html:
    grid: 
      body-width: 1300px
    resources: 
      - shinylive-sw.js
filters: 
  - shinylive
---





```{shinylive-r}
#| standalone: true
#| viewerHeight: 800
library(shiny)
library(bslib)

ui <- page_sidebar(
  sidebar = sidebar(
    selectInput("subcat",
                "BMP Category:",
                c("Row crop field" = "Cropland",
                  "Detention" = "Detention",
                  "Drainage" = "Drainage",
                  "Filtration" = "Filtration",
                  "Infiltration" = "Infiltration",
                  "Livestock" = "Livestock",
                  "Treatment" = "Treatment"),
                selected = "Livestock")),
  verbatimTextOutput("summary",
                     placeholder = TRUE)
  
)


server <- function(input, output) {
  df <- read.csv("https://raw.githubusercontent.com/mps9506/test-webr-dashboard/main/data/data.csv")
  df$BMP_SubCat <- as.factor(df$BMP_SubCat)
  
  
  model_output <- reactive({
    model_data <- df[df$BMP_SubCat == input$variable,]
    model_data <- model_data[!is.na(model_data$Pre) & !is.na(model_data$Post),]
    m1 <- lm(log(Post) ~ log(Pre),
             data = model_data)
    m1
  })
  output$summary <- renderPrint({ 
    summary(model_output())
  })
  
  
}

shinyApp(ui = ui, server = server)



```
